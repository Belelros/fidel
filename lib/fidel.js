/*!
 * fidel - a ui view controller
 * v3.0.0
 * https://github.com/jgallen23/fidel
 * copyright Greg Allen 2014
 * MIT License
*/
(function(a,b){var c=0;var d=function(a){this.obj=a};d.prototype.__init=function(a){b.extend(this,this.obj);this.id=c++;this.namespace=".fidel"+this.id;this.obj.defaults=this.obj.defaults||{};b.extend(this,this.obj.defaults,a);b("body").trigger("FidelPreInit",this);this.setElement(this.el||b("<div/>"));if(this.init){this.init()}b("body").trigger("FidelPostInit",this)};d.prototype.eventSplitter=/^(\w+)\s*(.*)$/;d.prototype.setElement=function(a){this.el=a;this.getElements();this.dataElements();this.delegateEvents();this.delegateActions()};d.prototype.find=function(a){return this.el.find(a)};d.prototype.proxy=function(a){return b.proxy(a,this)};d.prototype.getElements=function(){if(!this.elements)return;for(var a in this.elements){var b=this.elements[a];this[b]=this.find(a)}};d.prototype.dataElements=function(){var a=this;this.find("[data-element]").each(function(c,d){var e=b(d);var f=e.data("element");a[f]=e})};d.prototype.delegateEvents=function(){if(!this.events)return;for(var a in this.events){var b=this.events[a];var c=a.match(this.eventSplitter);var d=c[1],e=c[2];var f=this.proxy(this[b]);if(e===""){this.el.on(d+this.namespace,f)}else{if(this[e]&&typeof this[e]!="function"){this[e].on(d+this.namespace,f)}else{this.el.on(d+this.namespace,e,f)}}}};d.prototype.delegateActions=function(){var a=this;a.el.on("click"+this.namespace,"[data-action]",function(c){var d=b(this);var e=d.attr("data-action");if(a[e]){a[e](c,d)}})};d.prototype.on=function(a,b){this.el.on(a+this.namespace,b)};d.prototype.one=function(a,b){this.el.one(a+this.namespace,b)};d.prototype.emit=function(a,b,c){var d=c?this.namespace:"";this.el.trigger(a+d,b)};d.prototype.hide=function(){if(this.views){for(var a in this.views){this.views[a].hide()}}this.el.hide()};d.prototype.show=function(){if(this.views){for(var a in this.views){this.views[a].show()}}this.el.show()};d.prototype.destroy=function(){this.el.empty();this.emit("destroy");this.el.unbind(this.namespace)};d.onPreInit=function(a){b("body").on("FidelPreInit",function(b,c){a.call(c)})};d.onPostInit=function(a){b("body").on("FidelPostInit",function(b,c){a.call(c)})};a.fidel=a.fidel||{};a.fidel={define:function e(b,c){var e=function(a){this.__init(a)};e.prototype=new d(c);a.fidel.modules[b]=e;if(typeof window.fidel.$!=="undefined"){window.fidel.$(b,c)}return e},modules:{}};a.Fidel=d})(window,window.jQuery||window.Zepto);