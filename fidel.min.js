/*!
  * Fidel - A javascript controller
  * v1.2
  * https://github.com/jgallen23/fidel
  * copyright JGA 2011
  * MIT License
  */
!function(a){var b={};b.guid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=Math.random()*16|0,c=a==="x"?b:b&3|8;return c.toString(16)}).toUpperCase()},b.extend=function(){throw new Error("Fidel.extend is deprecated, please use Fidel.ViewController.extend")};var c=a.Fidel;b.noConflict=function(){a.Fidel=c;return this},a.Fidel=b}(this),!function(a){var b=!1,c=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;a.Class=function(){},a.Class.extend=function(d){function i(){b||(this.guid=a.guid(),this._initialize&&this._initialize.apply(this,arguments),this.init&&this.init.apply(this,arguments))}var e=this.prototype;b=!0;var g=new this;b=!1;for(var h in d)g[h]=typeof d[h]=="function"&&typeof e[h]=="function"&&c.test(d[h])?function(a,b){return function(){var c=this._super;this._super=e[a];var d=b.apply(this,arguments);this._super=c;return d}}(h,d[h]):d[h];i.prototype=g,i.prototype.proxy=function(a){var b=this;return function(){return a.apply(b,arguments)}},i.constructor=i,i.extend=arguments.callee;return i}}(Fidel||this),function(a){var b=/^(\w+)\s*(.*)$/,c=a.Class.extend({_initialize:function(a){for(var b in a)this[b]=a[b];if(!this.el)throw"el is required";this.events&&this.delegateEvents(),this.elements&&this.refreshElements(),this.templateSelector&&this.loadTemplate(),this.actionEvent||(this.actionEvent="click"),this.delegateActions(),this.getDataElements()},delegateEvents:function(){for(var a in this.events){var c=a,d=this.proxy(this[c]),e=this.events[a].match(b),f=e[1],g=e[2];g===""?this.el.bind(f,d):this.el.delegate(g,f,d)}},delegateActions:function(){var a=this.find("[data-action]");for(var b=0,c=a.length;b<c;b++){var d=$(a[b]),e=d.attr("data-action"),f=this.proxy(this[e]),g=this.actionEvent,h='[data-action="'+e+'"]';this.el.delegate(h,g,f)}},refreshElements:function(){for(var a in this.elements)this[a]=this.find(this.elements[a])},getDataElements:function(){var a=this,b=this.find("[data-element]");for(var c=0,d=b.length;c<d;c++){var e=$(b[c]);a[e.attr("data-element")]=e}},loadTemplate:function(){this.template=$(this.templateSelector).html()},find:function(a){return $(a,this.el[0])},render:function(a,b){var c=c||$;if(c){var d=c.template(this.template,a);b=b?$(b):this.el,b.html(d)}}});a.ViewController=c}(Fidel||this)