/*!
  * Fidel - A javascript controller 
  * v1.1.1
  * https://github.com/jgallen23/fidel
  * copyright JGA 2011
  * MIT License
  */
(function(a){var b=/^(\w+)\s*(.*)$/,c=function(){return{_initialize:function(a){for(var b in a)this[b]=a[b];if(!this.el)throw"el is required";this.events&&this.delegateEvents(),this.elements&&this.refreshElements(),this.templateSelector&&this.loadTemplate(),this.actionEvent||(this.actionEvent="click"),this.delegateActions(),this.getDataElements()},proxy:function(a){var b=this;return function(){if(a)return a.apply(b,arguments)}},delegateEvents:function(){for(var a in this.events){var c=a,d=this.proxy(this[c]),e=this.events[a].match(b),f=e[1],g=e[2];g===""?this.el.bind(f,d):this.el.delegate(g,f,d)}},delegateActions:function(){var a=this.find("[data-action]");for(var b=0,c=a.length;b<c;b++){var d=$(a[b]),e=d.attr("data-action"),f=this.proxy(this[e]),g=this.actionEvent,h='[data-action="'+e+'"]';this.el.delegate(h,g,f)}},refreshElements:function(){for(var a in this.elements)this[a]=this.find(this.elements[a])},getDataElements:function(){var a=this,b=this.find("[data-element]");for(var c=0,d=b.length;c<d;c++){var e=$(b[c]);a[e.attr("data-element")]=e}},loadTemplate:function(){this.template=$(this.templateSelector).html()},find:function(a){return $(a,this.el[0])},render:function(a,b){var c=c||$;if(c){var d=c.template(this.template,a);b=b?$(b):this.el,b.html(d)}},trigger:function(a,b){$(this.el).trigger(a,b)},bind:function(a,b){var c=this;$(this.el).bind(a,function(){b.apply(c,arguments)})}}};c.extend=function(a){var b=function(){this._initialize.apply(this,arguments),this.init&&this.init.apply(this,arguments)};b.prototype=new this;for(var c in a)a.hasOwnProperty(c)&&(b.prototype[c]=a[c]);b.prototype.constructor=b;return b};var d=a.Fidel;c.noConflict=function(){a.Fidel=d;return this},a.Fidel=c})(window)