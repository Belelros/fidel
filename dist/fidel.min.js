/*!
  * Fidel - A javascript view controller
  * v2.0.0
  * https://github.com/jgallen23/fidel
  * copyright JGA 2012
  * MIT License
  */
(function(e,t){var n=function(e,n,r){t.extend(this,n),this.el=e,this.els={},n.defaults=n.defaults||{},this.options=t.extend({},n.defaults,r),t("body").trigger("FidelPreInit",this),this.getElements(),this.delegateEvents(),this.delegateActions(),this.init&&this.init(),t("body").trigger("FidelPostInit",this)};n.prototype.eventSplitter=/^(\w+)\s*(.*)$/,n.prototype.find=function(e){return this.el.find(e)},n.prototype.proxy=function(e){return t.proxy(e,this)},n.prototype.getElements=function(){if(!this.elements)return;for(var e in this.elements){var t=this.elements[e];this.els[t]=this.find(e)}},n.prototype.delegateEvents=function(){var e=this;if(!this.events)return;for(var t in this.events){var n=this.events[t],r=t.match(this.eventSplitter),i=r[1],s=r[2],o=this.proxy(this[n]);s===""?this.el.on(i,o):this.els[s]?this.els[s].on(i,o):this.el.on(i,s,o)}},n.prototype.delegateActions=function(){var e=this;e.el.on("click","[data-action]",function(n){var r=t(this),i=r.attr("data-action");e[i]&&e[i](n,r)})},n.prototype.on=function(e,t){this.el.on(e,t)},n.prototype.emit=function(e,t){this.el.trigger(e,t)},n.prototype.hide=function(){if(this.views)for(var e in this.views)this.views[e].hide();this.el.hide()},n.prototype.show=function(){if(this.views)for(var e in this.views)this.views[e].show();this.el.show()},n.onPreInit=function(e){t("body").on("FidelPreInit",function(t,n){e.call(n)})},n.onPostInit=function(e){t("body").on("FidelPostInit",function(t,n){e.call(n)})},t.fidel=function(e,r){t.fn[e]=function(i){return this.each(function(){var s=t(this),o=s.data(e);o||(o=new n(s,r,i),s.data(e,o)),typeof i=="string"&&o[i]()})},t.fn[e].defaults=r.defaults||{}},e.Fidel=n})(window,window.jQuery||window.Zepto)